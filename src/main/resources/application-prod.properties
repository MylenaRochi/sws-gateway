# Production Configuration for SWS Gateway
spring.application.name=sws-gateway

# Profile Configuration
spring.profiles.active=prod

# Database Configuration - Production
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/sws_gateway}
spring.datasource.username=${DATABASE_USERNAME:sws_gateway}
spring.datasource.password=${DATABASE_PASSWORD:sws_gateway}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration - Optimized for Production
spring.datasource.hikari.maximum-pool-size=${DB_POOL_MAX_SIZE:20}
spring.datasource.hikari.minimum-idle=${DB_POOL_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA Configuration - Production Optimized
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# HTTP Client Configuration for Proxy
spring.http.client.connection-timeout=30000
spring.http.client.read-timeout=60000

# Logging Configuration - Production
logging.level.com.senior.sws_gateway=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN
logging.level.org.springframework.security=WARN
logging.level.org.springframework.boot=INFO
logging.level.root=WARN

# Logging Patterns and File Configuration
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n
logging.file.name=${LOG_FILE_PATH:/var/log/sws-gateway/application.log}
logging.file.max-size=100MB
logging.file.max-history=30
logging.file.total-size-cap=1GB

# Server Configuration
server.port=${PORT:8080}
server.servlet.context-path=${CONTEXT_PATH:/api/v1}
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Error Handling
server.error.include-message=never
server.error.include-binding-errors=never
server.error.include-stacktrace=never
server.error.include-exception=false

# Management and Monitoring - Production
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=never
management.endpoint.health.probes.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.tags.application=${spring.application.name}
management.metrics.tags.environment=production

# Security Configuration
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict
server.forward-headers-strategy=framework

# Gateway Specific Configuration
gateway.proxy.timeout=${PROXY_TIMEOUT:30000}
gateway.proxy.max-connections=${PROXY_MAX_CONNECTIONS:100}
gateway.consumption.batch-size=${CONSUMPTION_BATCH_SIZE:100}

# Environment Variables Documentation
# DATABASE_URL - PostgreSQL connection URL
# DATABASE_USERNAME - Database username
# DATABASE_PASSWORD - Database password
# DB_POOL_MAX_SIZE - Maximum database connection pool size (default: 20)
# DB_POOL_MIN_IDLE - Minimum idle connections in pool (default: 5)
# PORT - Server port (default: 8080)
# CONTEXT_PATH - Application context path (default: /api/v1)
# LOG_FILE_PATH - Log file location (default: /var/log/sws-gateway/application.log)
# PROXY_TIMEOUT - HTTP proxy timeout in milliseconds (default: 30000)
# PROXY_MAX_CONNECTIONS - Maximum proxy connections (default: 100)
# CONSUMPTION_BATCH_SIZE - Batch size for consumption processing (default: 100)